letters = {
	'a':1,
	'b':2,
	'c':3,
	'd':4,
	'e':5,
	'f':6,
	'g':7,
	'h':8,
	'i':9,
	'j':1,
	'k':2,
	'l':3,
	'm':4,
	'n':5,
	'o':6,
	'p':7,
	'q':8,
	'r':9,
	's':1,
	't':2,
	'u':3,
	'v':4,
	'w':5,
	'x':6,
	'y':7,
	'z':8
}

heading_num = 0

meanings = {
	"Life Path Number":"This number reveals what you were born to do and who you are.  It is the most significant number."
	"Destiny Number":"Your mission in life.  What you are destined to accomplish after reaching your full potential."
	"Soul Number":"This number reveals what motivates you and what you are urged to do to be content."
	"Personality Number":"This number shows the side of you that you are willing to reveal to others rather than your true inner nature."
	"Maturity Number":"This number shows your future potential and the ultimate goal of your life."
	"Birth Day Number":"This number indicates special talents or abilities that help you fulfil your life purpose."
	"Current Name Number":"This number shows additional strengths, experiences, and traits that will help you fulfil your purpose in life."
	"First Name Number":"This number reveals additional strengths, experiences, and traits that will help you fulfil your purpose in life."
	"Last Name Number":"This number reveals traits you inherited from your ancestors."
	"Cornerstone Number":"This number represents your general attitudes toward life and how you think about the world around you."
	"Lesson Numbers":"Indicates weaknesses and areas for growth.  They are lessons you need to learn."
}

numbers = [
	1:{
		"title":"The Independent Individual"
		"about":"Number 1s are unique and orignal individuals.  They can feel a little awkward around people, but they're strong in their thoughts and they want to be number #1 so they can be noticed.  Once they learn to be fair and just they can be increible leaders.  It is rare for a number 1 to except defeat which helps them think outside the box, become  interested in challenges, and have a love for inventing creative solutions to everyday annoyances and dilemmas.  They prefer to finsih something that has been started, they like to like to face the dangerhead on, and when they don't have the confidence to be self-reliant or to take control, they must learn to accept those characteristics throughout their life to have balance in their life.  1s spend their main area in life discovering life and trying to understand others.  They use their creative thoughts to manifest their dreams with better comfort.  Even though they might have an abrupt tone, intolerance, and a little sensitive to criticism, their the people we want to lead us in the future!"
		"strengths":"self-reliant, developing, adventureous, inventive, classic, self-inspiring, focused, headstrong, imaginative."
		"weaknesses":"impatient, aggressive, pushy, abrupt, selfish."
		"affirmation":"I embrace my strength, individuality, and independece."
	}
	2:{
		"title":"The Co-Operative Peacemaker"
		"about":"Number Twos are Cooperative Peacemaker of the earth, and their greatest gift is their amazing ability to heal people and the environment around them.  they are natural mediators who have a knack for smoothing things over, and their talent for seeing both sidesof a problem enables them to at a harmonious outcome for all.  they have a big haert and an enormous capacity to love.  Number twos thrive on connections and companionship and will do anything im their power to make sure that evryone feels contint and loved.  Because of fear of confrontation and overwhelming desiere to pleas, they have trouble saynig no which often makes them doormats for others.  rather than be honist about how they feel and risk making those around them be unhappy in the process, they tend to become martyrs hiding their unhappiness or resentment behind their smiles.  They prefer to have a partner, and not to be around negative energy. Regular exercise and self-examineation, healthy life-style, and loving partners are vital to their health. Many are musical lovers or are lovers of music."
		"strengths":"Understanding, caring, calm, soft, development, and aiding."
		"weaknesses":"Nonactive, fragile, cautious, possesive, very sensitive."
		"affirmation":"I nurture, love, and heal myself and others."
	}
	3:{
		"title":"The Self-Expressive Creative"
		"about":"Number threes are the artist and creators of the world, and their greatest gift is their ability to uplift and inspire. The child like threes are fun-loving and young at heart and have a talent for working with children. They're born entertainers who can light up a room with their smiles. Despite their tendency to criticize and Goss up there charisma is contagious and draws people that you like magnets. Number threes or bubbly bright and witty and have a fabulous sense of humor. Self-expression whether it's artistic kinesthetic verbal or conceptual is there a key to happiness. When they express themselves using their hands, bodies, words, visions, and ideas, they improve their overall well-being and quality-of-life. There are three types of number 3s:  those who are artistically creative, those who are too creative concepts and ideas, and those who are creatively gifted with words. All threes are destined to discover their creative gifts in this life so they can develop and express them on a regular basis. They are often drawn to the literary, visual, or performing arts."
		"strengths":"creative, optimistic, humorous, friendly, inspirational, imaginative, fun, outgoing, charismatic, gifted with words"
		"weaknesses":"critical, melodramatic, dishonest, disorganized, scattered, gossipy, irresponsible, superficial, attention seeking, conceited"
		"affirmation":"I express myself verbally and creatively and live a joyful life."
	}
	4:{
		"title":"The Dedicated Worker"
		"about":"Number fours are the dedicated hard worker's of the world who take the responsibility seriously. Due to their stable, practical, and reliable natures, they're often the pillars of the workplace, community, and family. They're the ones we depend on to keep the rest of us in line.  With the tendency to see things as either black or white, fours have a good old-fashioned values and morals and easily know right from wrong. They're always true to their word and are conscientious of doing the honorable thing. If they commit to doing something, don't follow through and won't let anyone down unless it's beyond their control."
		"strengths":"Hard-working, practical, grounded, stable, reliable, conscientious, organize, focused, disciplined, persistent"
		"weaknesses":"Intolerant, judgmental, critical, stubborn, narrowminded, inflexible, pessimistic, controlling, pedantic, emotionally closed"
		"affirmation":"I promote organization in order to make the world a better place."
	}
	5:{
		"title":"The Freedom-loving Adventurer"
		"about":" lives are the freedom loving adventures of the world who are always on the move. They enjoyed visiting new places, meeting new people, learning new things, I'm partaking in exciting new experiences. Their natural born detectives with curious minds of the colorful and changeable lives. Even other gifted communicators who love to teach, speak, and promote what interests them, they're short attention spans need for constant mental stimulation can make them easily bored and distracted.They are gifted sales people, networkers, and teachers who know a little about a lot of things."
		"strengths":" Magnetic, progressive,  clever, multitalented, resourceful, courageous, adventurous, resilient, enthusiastic"
		"weaknesses":"prone to addiction, unreliable, inclined to exaggerate, dishonest, scattered, irresponsible, intolerant, noncommittal, restless, inconsistent"
		"affirmation":"I embrace my freedom to explore every opportunity and life experience."
	}
	6:{
		"title":" The Responsible Caregiver"
		"about":" Says are the responsible caregivers of the world, and their greatest gift is their ability to nurture others with love. Their natural counselors and solid advisers to go above and beyond the call of duty to offer a helping hand. Relationships are their number one priority, for they are natural parents and providers who dedicate themselves a lot. They are often creatively or musically gifted or passionate lovers of music."
		"strengths":"generous, responsible, nurturing, loving, creative, supportive, wise, consistent, sympathetic, dependable"
		"weaknesses":"self-righteous, critical, perfectionist, bossy, martyrish, jealous, self-critical, unrealistic, prone to worry"
		"affirmation":"I counsel, serve, and heal others and myself with love."
	}
	7:{
		"title":"Contemplative Truth Seeker"
		"about":" Number seven audit contemplative truth seekers of the world who need quiet time alone to ponder the meaning of life and become a specialist and their craft. There a long time is spent meditating, relaxing, thinking, analyzing, studying, reading, gardening, oranges pot put a ring around, it is vital to the well-being and helps keep them centered.  It's important that partners and associates of number of 7s understand this about this number so they don't take their need for time by themselves personally. They are not as Social and outgoing as the other numbers (unless they are 34/7 Life Path; have an outgoing astrology chart; or have a outgoing Core Numbers such as 1, 3, and 5. Instead, they are the scholars, philosophers, and analyze analyst of the world who loves to learn and you need their space to quotation just be."
		"strengths":"independent, intuitive, analytical, intellectual, deep, insightful, inquisitive contemplative, technically oriented, philosophical"
		"weaknesses":"Secretive, untrusting, pessimistic, cynical, emotionally closed, defensive, skeptical, withdrawn, intolerant, perfectionist"
		"affirmation":" I discover my spiritual truth and improve my quality of life."
	}
	8:{
		"title":"The Business-Minded Leader"
		"about":"Number 8s are the business minded leaders of the world who are usually drunk to self employment or positions of authority.  As talented problem solvers, they enjoyed the throw of a challenge and are driven to succeed. Their strength, determination, and vision-combined with their good judgment and practicality-enable them to reach, and often exceed, their goals. when they lived by their higher ideals, they can be extremely successful in business. But when they have a negative attitude about life and money, they often struggle financially if they can overcome the tendency to worry, they have much potential for success."
		"strengths":"organized, authoritative, pioneering, self-motivated, dependable, tenacious, strong, driven, fair, hard-working"
		"weaknesses":"Workaholic, egotistical, manipulative, greedy, prone to worry, poverty-conscious, intolerant, superficial, intimidating"
		"affirmation":"I adopt an attitude of abundance and reclaim my personal power."
	}
	9:{
		"title":" The Compassionate  Humanitarian"
		"about":" Number 9s an compassionate humanitarians of the world who like to fight for the underdog and make the world a better place.  They are extremely generous, sympathetic, in-kind, and they feel the pain of others. It is not uncommon to see them fighting for a cause or donating their time, attention, or mommy to the underprivileged, animals, or the environment. Not all 9s are selfless and compassionate, though. In fact, most grow into becoming compassionate humanitarians through their life sessions and experiences. Even though a willingness to serve lies deep within them, it takes it complete overcoming of their lower ourselves. They reach the potential when they live by their higher ideals, But it's up to them where they choose to do so."
		"strengths":"generous, creative, sympathetic, intuitive, wise, compassionate, multitalented, passionate, understanding, broad-minded"
		"weaknesses":"intolerant, inpatient, aggressive, temperamental, intense, movie, hypersensitive, defensive, dramatic"
		"affirmation":"I am compassionate toward others and experience compassion in return."
	}
]

letters2numbers = (str) ->
	# convert letters to numbers here
	str  = str.toLowerCase()
	i    = 0
	nums = ''
	while i<str.length
		letter = str[i]
		num    = letters["#{letter}"]
		nums   = "#{nums}#{num}"
		i++
	return nums

reduce = (num) ->
	i = 0
	total = 0
	while i<num.length
		total = total + parseInt(num[i])
		i++
	if total > 9 then total = reduce "#{total}"
	return total

getNumberInfo = (num) ->
	return {
		title:numbers[0][num]['title'],
		about:numbers[0][num]['about'],
		strengths:numbers[0][num]['strengths'],
		weaknesses:numbers[0][num]['weaknesses'],
		affirmation:numbers[0][num]['affirmation']
	}

getVC = (str) ->
	# convert letters to numbers here
	i = 0
	v = ''
	c = ''
	while i<str.length
		letter = str[i].toLowerCase()
		if letter=='a' or letter=='e' or letter=='i' or letter=='o' or letter=='u' or letter=='y'
			v = "#{v}#{letter}"
		else
			c = "#{c}#{letter}"
		i++
	return {"vowels":v,"consonants":c}

getMissingNumbers = (str) ->
	i = 0
	all = [1,2,3,4,5,6,7,8,9]
	missing = ""
	arr = []
	for num in all
		pos = -1
		for letter in str
			if parseInt(letter)==num then pos = 1
		if pos < 0
			missing = "#{missing}#{num},"
			arr.push num
	return [missing.slice(0, -1),arr]

getNumberTextOld = (title,num,info) ->
	meaning = meanings["#{title}"]
	msg = "
	<div class='well'>
		<big><b>#{title} = #{num} - #{info['title']}</b></big><br>
		Meaning of the #{title}:  #{meaning}<br><br>
		<table>
			<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td><b>About</b></td></tr>
			<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td>#{info['about']}</td></tr>
			<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td><br>&nbsp;</td></tr>
			<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td><b>Strengths</b></td></tr>
			<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td>#{info['strengths']}</td></tr>
			<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td><br>&nbsp;</td></tr>
			<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td><b>Weaknesses</b></td></tr>
			<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td>#{info['weaknesses']}</td></tr>
			<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td><br>&nbsp;</td></tr>
			<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td><b>Affirmation</b></td></tr>
			<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td>#{info['affirmation']}</td></tr>
			<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td><br>&nbsp;</td></tr>
		</table>
	</div>
	"
	return msg

getNumberText = (title,num,info) ->
	heading_num++
	meaning = meanings["#{title}"]
	msg = "
  	<div class='panel panel-default'>
    <div class='panel-heading' role='tab' id='heading#{heading_num}'>
      <h4 class='panel-title'>
        <a role='button' data-toggle='collapse' data-parent='#accordion' href='#collapse#{heading_num}' aria-expanded='true' aria-controls='collapse#{heading_num}'>
          #{title}:  #{num} - #{info['title']}
        </a>
      </h4>
    </div>
    <div id='collapse#{heading_num}' class='panel-collapse collapse in' role='tabpanel' aria-labelledby='heading#{heading_num}'>
      <div class='panel-body'>
		<big><b>#{title} = #{num} - #{info['title']}</b></big><br>
		Meaning of the #{title}:  #{meaning}<br><br>
		<table>
			<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td><b>About</b></td></tr>
			<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td>#{info['about']}</td></tr>
			<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td><br>&nbsp;</td></tr>
			<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td><b>Strengths</b></td></tr>
			<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td>#{info['strengths']}</td></tr>
			<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td><br>&nbsp;</td></tr>
			<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td><b>Weaknesses</b></td></tr>
			<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td>#{info['weaknesses']}</td></tr>
			<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td><br>&nbsp;</td></tr>
			<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td><b>Affirmation</b></td></tr>
			<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td>#{info['affirmation']}</td></tr>
			<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td><td><br>&nbsp;</td></tr>
		</table>
      </div>
    </div>
	</div>
	"
	return msg

$ ->
	$('#go').click(()->
		$('#ec').show()
		$('#instructions').hide()

		# Life Path (from the birthday)
		month  = $('#birthday').val().substring(0,2)
		day    = $('#birthday').val().substring(3,5)
		year   = $('#birthday').val().substring(6,10)
		rmonth = reduce month
		rday   = reduce day
		ryear  = reduce year

		life_path_number = reduce "#{rmonth}#{rday}#{ryear}"
		info             = getNumberInfo life_path_number
		msg              = getNumberText "Life Path Number", life_path_number, info

		# Destiny Number (from birth certificate full name)
		temp        = letters2numbers $('#first_name').val()
		first_name  = reduce temp
		temp        = letters2numbers $('#middle_name').val()
		middle_name = reduce temp
		temp        = letters2numbers $('#last_name').val()
		last_name   = reduce temp

		full_name      = "#{letters2numbers $('#first_name').val()}#{letters2numbers $('#middle_name').val()}#{letters2numbers $('#last_name').val()}"
		destiny_number = reduce full_name
		info           = getNumberInfo destiny_number
		msg            = msg + getNumberText "Destiny Number", destiny_number, info

		# Soul Number (vowels from birth certificate full name)
		vc          = getVC $('#first_name').val()
		v           = vc['vowels']
		nums        = letters2numbers v
		first_name  = reduce nums

		vc          = getVC $('#middle_name').val()
		v           = vc['vowels']
		nums        = letters2numbers v
		middle_name = reduce nums

		vc          = getVC $('#last_name').val()
		v           = vc['vowels']
		nums        = letters2numbers v
		last_name   = reduce nums

		soul_number = reduce "#{first_name}#{middle_name}#{last_name}"
		info        = getNumberInfo soul_number
		msg         = msg + getNumberText "Soul Number", soul_number, info

		#Personality Number (consonants from birth certificate full name)
		vc          = getVC $('#first_name').val()
		v           = vc['consonants']
		nums        = letters2numbers v
		first_name  = reduce nums

		vc          = getVC $('#middle_name').val()
		v           = vc['consonants']
		nums        = letters2numbers v
		middle_name = reduce nums

		vc          = getVC $('#last_name').val()
		v           = vc['consonants']
		nums        = letters2numbers v
		last_name   = reduce nums

		personality_number = reduce "#{first_name}#{middle_name}#{last_name}"
		info               = getNumberInfo personality_number
		msg                = msg + getNumberText "Personality Number", personality_number, info

		# Maturity Number (Life Path + Destiny)
		maturity_number = reduce "#{life_path_number}#{destiny_number}"
		info            = getNumberInfo maturity_number
		msg             = msg + getNumberText "Maturity Number", maturity_number, info

		# Birthday Number (Life Path + Destiny)
		birthday_number = reduce "#{day}"
		info            = getNumberInfo birthday_number
		msg             = msg + getNumberText "Birthday Number", birthday_number, info

		# Current Name Number (from current name)
		first_name  = letters2numbers $('#gb_first_name').val()
		first_name  = reduce first_name

		last_name   = letters2numbers $('#gb_last_name').val()
		last_name   = reduce last_name

		current_name_number = reduce "#{first_name}#{last_name}"
		info                = getNumberInfo current_name_number
		msg                 = msg + getNumberText "Current Name Number", current_name_number, info

		# Lesson Numbers (missing numbers from birth certificate name)
		info = getMissingNumbers "#{full_name}#{life_path_number}#{destiny_number}#{soul_number}#{birthday_number}#{personality_number}#{maturity_number}#{current_name_number}"
		lesson_number = info[0]
		missing = info[1]
		for num in missing
			info = getNumberInfo num
			msg  = msg + getNumberText "Lesson Numbers", num, info

		# First Name Number
		first_name         = letters2numbers $('#first_name').val()
		first_name_number  = reduce first_name
		info               = getNumberInfo first_name_number
		msg                = msg + getNumberText "First Name Number", first_name_number, info

		# Last Name Number
		last_name          = letters2numbers $('#last_name').val()
		last_name_number   = reduce last_name
		info               = getNumberInfo last_name_number
		msg                = msg + getNumberText "Last Name Number", last_name_number, info

		# Cornerstone Number
		letter             = letters2numbers $('#first_name').val().slice(0,1)
		cornerstone_number = reduce letter
		info               = getNumberInfo cornerstone_number
		msg                = msg + getNumberText "Cornerstone Number", cornerstone_number, info

		$('#accordion').html(msg)

		$('#survey').show()

	)

	$('#expandAll').click(()->
		$('.collapse').collapse('show')
	)

	$('#collapseAll').click(()->
		$('.collapse').collapse('hide')
		$('.collapse.in').collapse('hide')
	)
